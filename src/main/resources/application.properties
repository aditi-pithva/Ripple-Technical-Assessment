# Server Configuration
server.port=8080
spring.application.name=payment-service

# Database Configuration (H2 in-memory)
spring.datasource.url=jdbc:h2:mem:paymentdb
spring.datasource.driverClassName=org.h2.Driver
spring.datasource.username=sa
spring.datasource.password=

# JPA Configuration
spring.jpa.database-platform=org.hibernate.dialect.H2Dialect
spring.jpa.hibernate.ddl-auto=create-drop
spring.jpa.show-sql=true
spring.h2.console.enabled=true

# FX Service Configuration
fx.service.base-url=https://gitlab.com/ripple/ripplenet/experimental/pilot-technical-exercise
fx.service.timeout.connect=5000
fx.service.timeout.read=10000
fx.service.retry.max-attempts=3
fx.service.retry.delay=1000

# Resilience4j Circuit Breaker Configuration
resilience4j.circuitbreaker.instances.fxService.registerHealthIndicator=true
resilience4j.circuitbreaker.instances.fxService.slidingWindowSize=10
resilience4j.circuitbreaker.instances.fxService.minimumNumberOfCalls=5
resilience4j.circuitbreaker.instances.fxService.permittedNumberOfCallsInHalfOpenState=3
resilience4j.circuitbreaker.instances.fxService.automaticTransitionFromOpenToHalfOpenEnabled=true
resilience4j.circuitbreaker.instances.fxService.waitDurationInOpenState=10s
resilience4j.circuitbreaker.instances.fxService.failureRateThreshold=50
resilience4j.circuitbreaker.instances.fxService.eventConsumerBufferSize=10
resilience4j.circuitbreaker.instances.fxService.recordExceptions=org.springframework.web.client.ResourceAccessException,org.springframework.web.client.RestClientException

# Resilience4j Retry Configuration (works with circuit breaker)
resilience4j.retry.instances.fxService.maxAttempts=3
resilience4j.retry.instances.fxService.waitDuration=1s
resilience4j.retry.instances.fxService.enableExponentialBackoff=true
resilience4j.retry.instances.fxService.exponentialBackoffMultiplier=2
resilience4j.retry.instances.fxService.retryExceptions=org.springframework.web.client.ResourceAccessException,org.springframework.web.client.RestClientException

# Resilience4j Timeout Configuration (Note: TimeLimiter removed for Spring Boot 2.7 compatibility)
# Timeout is handled by RestTemplate configuration instead

# Logging
logging.level.com.ripple.payment=DEBUG
logging.level.org.springframework.web=INFO
logging.level.io.github.resilience4j=INFO

